require 'spec_helper'

describe WebhooksController do
  let(:card_list_change_action_json) { '{"action":{"id":"52e0055961ed8113521249bb","idMemberCreator":"4fc53e097719b45963e8ec35","data":{"listAfter":{"name":"Working","id":"50eda21570cb352222003328"},"listBefore":{"name":"Sprint ","id":"50eda27e70cb35222200333e"},"board":{"shortLink":"nH91E9Wf","name":"Product Development","id":"50eda21570cb352222003326"},"card":{"shortLink":"dtZDDhcT","idShort":1052,"name":"5 - Backfill Email Patterns","id":"52deb4919a4ce83458b40fb8","idList":"50eda21570cb352222003328"},"old":{"idList":"50eda27e70cb35222200333e"}},"type":"updateCard","date":"2014-01-22T17:52:25.564Z","memberCreator":{"id":"4fc53e097719b45963e8ec35","avatarHash":"380f74c1a9509d0ddd4e5accaf623fbe","fullName":"Rob Forman","initials":"RF","username":"robforman"}},"model":{"id":"50eda21570cb352222003326","name":"Product Development","desc":"","descData":null,"closed":false,"idOrganization":"507d80eaba5c12d37d87f3c4","pinned":true,"url":"https://trello.com/b/nH91E9Wf/product-development","shortUrl":"https://trello.com/b/nH91E9Wf","prefs":{"permissionLevel":"org","voting":"disabled","comments":"members","invitations":"members","selfJoin":false,"cardCovers":false,"cardAging":"regular","calendarFeedEnabled":true,"background":"blue","backgroundColor":"#205C7E","backgroundImage":null,"backgroundImageScaled":null,"backgroundTile":false,"backgroundBrightness":"unknown","canBePublic":true,"canBeOrg":true,"canBePrivate":true,"canInvite":true},"labelNames":{"yellow":"Bug","red":"DevOps","purple":"Customers","orange":"UX","green":"Feature","blue":"Sprint Overflow"}}}' }
  let(:card_name_change_action_json) { '{"action":{"id":"52e0072d5c541e4c2046f3ab","idMemberCreator":"4fc53e097719b45963e8ec35","data":{"board":{"shortLink":"nH91E9Wf","name":"Product Development","id":"50eda21570cb352222003326"},"card":{"shortLink":"dtZDDhcT","idShort":1052,"id":"52deb4919a4ce83458b40fb8","name":"8 - Backfill Email Patterns"},"old":{"name":"5 - Backfill Email Patterns"}},"type":"updateCard","date":"2014-01-22T18:00:13.009Z","memberCreator":{"id":"4fc53e097719b45963e8ec35","avatarHash":"380f74c1a9509d0ddd4e5accaf623fbe","fullName":"Rob Forman","initials":"RF","username":"robforman"}},"model":{"id":"50eda21570cb352222003326","name":"Product Development","desc":"","descData":null,"closed":false,"idOrganization":"507d80eaba5c12d37d87f3c4","pinned":true,"url":"https://trello.com/b/nH91E9Wf/product-development","shortUrl":"https://trello.com/b/nH91E9Wf","prefs":{"permissionLevel":"org","voting":"disabled","comments":"members","invitations":"members","selfJoin":false,"cardCovers":false,"cardAging":"regular","calendarFeedEnabled":true,"background":"blue","backgroundColor":"#205C7E","backgroundImage":null,"backgroundImageScaled":null,"backgroundTile":false,"backgroundBrightness":"unknown","canBePublic":true,"canBeOrg":true,"canBePrivate":true,"canInvite":true},"labelNames":{"yellow":"Bug","red":"DevOps","purple":"Customers","orange":"UX","green":"Feature","blue":"Sprint Overflow"}}}' }

  describe "POST create" do
    context "with list_change action" do
      let(:action_json) { card_list_change_action_json }

      it "decrements the point count of the before list"
      it "increments the point count of the after list"
    end
  end
end
